
@model IEnumerable<ChinookMusicStore.Web.AspNetCore.Models.Customer>
@{
    ViewData["Title"] = "Customer Details";
}

<h1>Customer Details</h1>

<table id="tblCustomer" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>CustomerId</th>
            <th>FirstName</th>
            <th>LastName</th>
            <th>Company</th>
            <th>Address</th>
            <th>City</th>
            <th>State</th>
            <th>Country</th>
            <th>PostalCode</th>
            <th>Phone</th>
            <th>Fax</th>
            <th>Email</th>
            <th>SupportRepId</th>
            <th>Customer Detail</th>
            <th>Delete Customer</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.CustomerId </td>
                <td>@item.FirstName </td>
                <td>@item.LastName </td>
                <td>@item.Company </td>
                <td>@item.Address </td>
                <td>@item.City </td>
                <td>@item.State </td>
                <td>@item.Country </td>
                <td>@item.PostalCode </td>
                <td>@item.Phone </td>
                <td>@item.Fax </td>
                <td>@item.Email </td>
                <td>@item.SupportRepId </td>
                <td>
                    <a asp-controller="Customers" asp-action="Edit"
                       asp-route-Id="@item.CustomerId" data-toggle="modal" data-target="CustomerModal">Edit</a>
                </td>

                <td>
                    <a asp-controller="Customers" asp-action="Delete"
                       asp-route-Id="@item.CustomerId">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts{
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.js"></script>
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

}

<!-- Modal Pop up-->
<div class="modal fade" id="CustomerModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Modal Header</h4>
            </div>
            <div class="modal-body">
                <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>



@*<script>
    $(document).ready(function () {

        var customers = new Array();
        $("#tblCustomer TBODY TR").each(function () {
            var row = $(this);
            var customer = {};
            customer.FirstName = row.find("TD").eq(0).html();
            customer.LastName = row.find("TD").eq(1).html();
            customer.Company = row.find("TD").eq(2).html();
            customer.Address = row.find("TD").eq(3).html();
            customer.City = row.find("TD").eq(4).html();
            customer.State = row.find("TD").eq(5).html();
            customer.Country = row.find("TD").eq(6).html();
            customer.PostalCode = row.find("TD").eq(7).html();
            customer.Phone = row.find("TD").eq(8).html();
            customer.Fax = row.find("TD").eq(9).html();
            customer.Email = row.find("TD").eq(10).html();
            customer.SupportRepId = row.find("TD").eq(11).html();
            customers.push(customer);
        });

        //Send the JSON array to Controller using AJAX.
        $.ajax({
            type: "POST",
            url: "@Url.Action("Edit")",
            data: JSON.stringify(customers),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (r) {
                alert(r + " record(s) inserted.");
            }
        });

        $.ajax({
            type: "POST",
            url: "@Url.Action("Delete")",
            data: JSON.stringify(customers),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (r) {
                alert(r + " record(s) inserted.");
            }
        });
    });
    </script>*@
